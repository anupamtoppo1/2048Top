<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2048 Purple - YouTube Edition</title>
    <style>
        :root {
            --bg-purple: #a547d6;
            --grid-bg: #111111;
            /* Tile Colors from image */
            --t2: #9e00ff; --t4: #f42c5c; --t8: #ffca28; --t16: #00cd01;
            --t32: #0095e0; --t64: #c2175b; --t128: #ff6d00; --t256: #1de9b6;
            --t2048: #4a148c;
        }

        * { box-sizing: border-box; -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; }

        body {
            background-color: var(--bg-purple);
            font-family: 'Arial', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            touch-action: none;
        }

        /* Header UI */
        .header {
            width: 90%;
            max-width: 400px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0 10px 0;
        }

        .score-row { display: flex; gap: 8px; }

        .stat-box {
            background: #000000;
            border-radius: 4px;
            padding: 5px 12px;
            min-width: 80px;
            text-align: center;
            color: white;
        }

        .stat-label { font-size: 10px; color: #b388ff; font-weight: bold; }
        .stat-value { font-size: 18px; font-weight: bold; }

        /* Game Board */
        .board-container {
            position: relative;
            width: 85vw;
            height: 85vw;
            max-width: 380px;
            max-height: 380px;
            background-color: var(--grid-bg);
            border: 6px solid var(--grid-bg);
            border-radius: 8px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 6px;
        }

        .tile {
            width: 100%; height: 100%;
            background: #222;
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        /* Tile Values */
        .tile[data-val="2"] { background: var(--t2); }
        .tile[data-val="4"] { background: var(--t4); }
        .tile[data-val="8"] { background: var(--t8); }
        .tile[data-val="16"] { background: var(--t16); }
        .tile[data-val="32"] { background: var(--t32); }
        .tile[data-val="64"] { background: var(--t64); }
        .tile[data-val="128"] { background: var(--t128); font-size: 20px; }
        .tile[data-val="256"] { background: var(--t256); font-size: 20px; }
        .tile[data-val="2048"] { background: var(--t2048); font-size: 18px; }

        /* Buttons */
        .controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .btn {
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            border: none;
            font-weight: bold;
            font-size: 14px;
        }

        /* ADS BANNER STYLING */
        .ad-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #1a1a1a;
            color: white;
            text-align: center;
            padding: 12px 10px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.5);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            text-decoration: none;
            transition: background 0.3s;
        }
        
        .ad-banner:hover {
            background: #252525;
        }

        .ad-text {
            font-size: 14px;
            font-weight: bold;
        }

        .yt-button {
            background: #ff0000;
            color: white;
            padding: 5px 12px;
            border-radius: 4px;
            text-transform: uppercase;
            font-size: 12px;
            font-weight: 900;
        }

        #game-over {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            border-radius: 8px;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="score-row">
            <div class="stat-box">
                <div class="stat-label">SCORE</div>
                <div id="score" class="stat-value">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">BEST</div>
                <div id="best" class="stat-value">0</div>
            </div>
        </div>
        <div style="font-size: 28px; cursor: pointer;">‚â°</div>
    </div>

    <div class="board-container" id="board">
        <div id="game-over">
            <h1 style="color:white; margin-bottom: 20px;">Game Over!</h1>
            <button class="btn" onclick="resetGame()">Try Again</button>
        </div>
    </div>

    <div class="controls">
        <button class="btn" id="audioBtn">üéµ Play Music</button>
        <button class="btn" onclick="resetGame()">Restart</button>
    </div>

    <!-- ADVERTISEMENT BANNER -->
    <a href="https://www.youtube.com/@ToppoAT" target="_blank" class="ad-banner">
        <div class="ad-text">Subscribe to YouTube channel</div>
        <div class="yt-button">SUBSCRIBE OUR YOUTUBE CHANNEL</div>
    </a>

    <audio id="bgMusic" loop src="song.mp3"></audio>

    <script>
        let grid = [];
        let score = 0;
        let bestScore = localStorage.getItem('2048-yt-best') || 0;
        const size = 4;
        const boardEl = document.getElementById('board');
        const audio = document.getElementById('bgMusic');
        const audioBtn = document.getElementById('audioBtn');

        function init() {
            grid = Array(size).fill().map(() => Array(size).fill(0));
            score = 0;
            document.getElementById('best').innerText = bestScore;
            addTile(); addTile();
            render();
        }

        function addTile() {
            let empty = [];
            for(let r=0; r<size; r++) for(let c=0; c<size; c++) if(grid[r][c]===0) empty.push({r,c});
            if(empty.length) {
                let {r,c} = empty[Math.floor(Math.random()*empty.length)];
                grid[r][c] = Math.random() > 0.1 ? 2 : 4;
            }
        }

        function render() {
            const tiles = document.querySelectorAll('.tile');
            tiles.forEach(t => t.remove());
            for(let r=0; r<size; r++) {
                for(let c=0; c<size; c++) {
                    let tile = document.createElement('div');
                    tile.className = 'tile';
                    if(grid[r][c] !== 0) {
                        tile.innerText = grid[r][c];
                        tile.setAttribute('data-val', grid[r][c]);
                    }
                    boardEl.appendChild(tile);
                }
            }
            document.getElementById('score').innerText = score;
            if(score > bestScore) {
                bestScore = score;
                document.getElementById('best').innerText = bestScore;
                localStorage.setItem('2048-yt-best', bestScore);
            }
        }

        function slide(row) {
            let filtered = row.filter(x => x !== 0);
            for(let i=0; i<filtered.length-1; i++) {
                if(filtered[i] === filtered[i+1]) {
                    filtered[i] *= 2;
                    score += filtered[i];
                    filtered.splice(i+1, 1);
                }
            }
            while(filtered.length < size) filtered.push(0);
            return filtered;
        }

        function move(dir) {
            let prev = JSON.stringify(grid);
            if(dir === 'Left' || dir === 'Right') {
                for(let r=0; r<size; r++) {
                    let row = grid[r];
                    if(dir === 'Right') row.reverse();
                    row = slide(row);
                    if(dir === 'Right') row.reverse();
                    grid[r] = row;
                }
            } else {
                for(let c=0; c<size; c++) {
                    let col = [grid[0][c], grid[1][c], grid[2][c], grid[3][c]];
                    if(dir === 'Down') col.reverse();
                    col = slide(col);
                    if(dir === 'Down') col.reverse();
                    for(let r=0; r<size; r++) grid[r][c] = col[r];
                }
            }
            if(prev !== JSON.stringify(grid)) {
                addTile(); render(); checkGameOver();
            }
        }

        function checkGameOver() {
            let possible = false;
            for(let r=0; r<size; r++) {
                for(let c=0; c<size; c++) {
                    if(grid[r][c] === 0) possible = true;
                    if(c<3 && grid[r][c] === grid[r][c+1]) possible = true;
                    if(r<3 && grid[r][c] === grid[r+1][c]) possible = true;
                }
            }
            if(!possible) document.getElementById('game-over').style.display = 'flex';
        }

        function resetGame() {
            document.getElementById('game-over').style.display = 'none';
            init();
        }

        // PC Controls
        window.addEventListener('keydown', e => {
            if(e.key.includes('Arrow')) move(e.key.replace('Arrow',''));
        });

        // Mobile Controls
        let startX, startY;
        document.addEventListener('touchstart', e => {
            startX = e.touches[0].clientX; startY = e.touches[0].clientY;
        }, {passive: false});

        document.addEventListener('touchend', e => {
            let diffX = startX - e.changedTouches[0].clientX;
            let diffY = startY - e.changedTouches[0].clientY;
            if(Math.abs(diffX) > Math.abs(diffY)) {
                if(Math.abs(diffX) > 30) move(diffX > 0 ? 'Left' : 'Right');
            } else {
                if(Math.abs(diffY) > 30) move(diffY > 0 ? 'Up' : 'Down');
            }
        });

        // Music
        audioBtn.onclick = () => {
            if(audio.paused) { audio.play(); audioBtn.innerText = "‚è∏ Pause Music"; }
            else { audio.pause(); audioBtn.innerText = "üéµ Play Music"; }
        };

        init();
    </script>
</body>
</html>
